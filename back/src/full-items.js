const items = ['MPE447737398',
'MPE446599423',
'MPE446599268',
'MPE447362338',
'MPE446599423',
'MPE447362338',
'MPE446599423',
'MPE447362338',
'MPE447737421',
'MPE446600094',
'MPE446600170',
'MPE446600246',
'MPE446600326',
'MPE445898816',
'MPE445898812',
'MPE445898816',
'MPE445898798',
'MPE445898816',
'MPE445898816',
'MPE445898809',
'MPE445898829',
'MPE445898816',
'MPE445898818',
'MPE445898844',
'MPE445898834',
'MPE445898834',
'MPE445898834',
'MPE447937599',
'MPE445898834',
'MPE445898834',
'MPE445898811',
'MPE445898811',
'MPE445898811',
'MPE445898811',
'MPE445898811',
'MPE445898828',
'MPE445898828',
'MPE445898831',
'MPE445898828',
'MPE445898828',
'MPE445898814',
'MPE445898823',
'MPE445898814',
'MPE445898830',
'MPE445898814',
'MPE445898814',
'MPE445898821',
'MPE445898821',
'MPE445898821',
'MPE445898821',
'MPE445898822',
'MPE447937816',
'MPE445898822',
'MPE445898801',
'MPE445898822',
'MPE445898802',
'MPE445898822',
'MPE445933120',
'MPE447567465',
'MPE445933116',
'MPE447567465',
'MPE445933113',
'MPE447567465',
'MPE445933118',
'MPE445933112',
'MPE445933112',
'MPE445990279',
'MPE445933117',
'MPE445990279',
'MPE445933110',
'MPE445990279',
'MPE445933121',
'MPE445990279',
'MPE445990279',
'MPE445933125',
'MPE445933125',
'MPE445933111',
'MPE445933125',
'MPE445933125',
'MPE446605089',
'MPE446604858',
'MPE601890558',
'MPE446605121',
'MPE446002587',
'MPE446768791',
'MPE446647631',
'MPE446647476',
'MPE446654020',
'MPE446654299',
'MPE446769010',
'MPE446769067',
'MPE446605201',
'MPE447357677',
'MPE446728735',
'MPE446002572',
'MPE446002639',
'MPE445990670',
'MPE446604955',
'MPE445992192',
'MPE446604955',
'MPE445990529',
'MPE445990448',
'MPE445990495',
'MPE445990448',
'MPE445990448',
'MPE445990448',
'MPE445990348',
'MPE445990218',
'MPE445990310',
'MPE445990218',
'MPE445990218',
'MPE445990192',
'MPE445990123',
'MPE445990151',
'MPE445990123',
'MPE445990123',
'MPE446769168',
'MPE446769207',
'MPE446769267',
'MPE446604968',
'MPE446604955',
'MPE446604955',
'MPE446768791',
'MPE446769304',
'MPE446769372',
'MPE446769491',
'MPE446769537',
'MPE446589106',
'MPE447153178',
'MPE447153623',
'MPE447189122',
'MPE447191668',
'MPE445972959',
'MPE447969447',
'MPE447969736',
'MPE447814935',
'MPE447969772',
'MPE447969794',
'MPE447815416',
'MPE447969825',
'MPE447856134',
'MPE445933112',
'MPE447861239',
'MPE447861414',
'MPE448040585',
'MPE448036399',
'MPE447861675',
'MPE447866731',
'MPE447866769',
'MPE447867369',
'MPE447938664',
'MPE447939275',
'MPE447938664',
'MPE600030209',
'MPE448106473',
'MPE600030197',
'MPE448106473',
'MPE448106552',
'MPE448106473',
'MPE600381140',
'MPE600376157',
'MPE600351167',
'MPE600376171']

const items2 =['MPE447938664',
    'MPE600376157',
    'MPE600351167'];

const skus = ['5063949', 
'5063951', 
'5114196', 
'5114198', 
'5114200', 
'5063954', 
'5063956', 
'4878504', 
'4681714', 
'4682125', 
'5046125', 
'5046126', 
'5046128', 
'5046129', 
'5046130', 
'5046131', 
'5046135', 
'5046086', 
'5046087', 
'5046088', 
'5046089', 
'5046090', 
'5046091', 
'5046092', 
'5046093', 
'5046094', 
'5046095', 
'5046101', 
'5046102', 
'5046103', 
'5046104', 
'5046105', 
'5046106', 
'5046107', 
'5046108', 
'5046059', 
'5046060', 
'5046061', 
'5046062', 
'5046063', 
'5046064', 
'5046065', 
'5046066', 
'5027045', 
'5027046', 
'5027047', 
'5027048', 
'5027050', 
'5027025', 
'5027027', 
'5027028', 
'5027029', 
'5027026', 
'5027030', 
'5027032', 
'5027033', 
'5027034', 
'4461906', 
'4461908', 
'5046028', 
'4682129', 
'3553553', 
'3578869', 
'4682130', 
'2918147', 
'4348223', 
'3071346', 
'4348220', 
'3075291', 
'4641700', 
'5044857', 
'4833036', 
'4312891', 
'5026953', 
'5027001', 
'5026967', 
'5026965', 
'5026968', 
'5026966', 
'5027008', 
'5027009', 
'5027007', 
'5027011', 
'5027012', 
'5027010', 
'4374462', 
'4591197', 
'4607656', 
'5026997', 
'5026998', 
'4682129', 
'3238034', 
'3432275', 
'4607653', 
'4682128', 
'4487567', 
'5196300', 
'5196299', 
'5196288', 
'5196251', 
'5196260', 
'5198356', 
'5198355', 
'5198362', 
'5198330', 
'5198359', 
'5198361', 
'5198358', 
'5027006', 
'5027049', 
'4461909', 
'5196246', 
'5195974', 
'5195973', 
'4972457', 
'4972458', 
'4972459', 
'5046146', 
'5046147', 
'5046072', 
'5046074', 
'5046071', 
'5114202', 
'5114204', 
'5114203']
const axios = require('axios');
const { response } = require('express');
const { token } = require('./ml');

const getFull = async() => {
    let access_token = await token();
    for(let i in items){
    setTimeout(async () => {
        try{
         const result = await axios.get(`https://api.mercadolibre.com/items/${items[i]}?include_attributes=all`,
         {headers: {'Content-Type': 'application/json',Authorization: `Bearer ${access_token}`,},})
         let variations = result.data.variations;
         if(variations.length === 0){
             let itemsku= result.data.attributes.find(x => x.id === "SELLER_SKU").value_name
             console.log(itemsku, items[i])
         } else{
         for(let j in variations){
             let sku = variations[j].attributes.find(x => x.id === "SELLER_SKU").value_name
             console.log( sku, items[i] ,variations[j].id)
            }
         }   
          }catch(err){
            console.log(items[i], err);
        }
           }, 1000 * i)

}}


const getFullSku = async() => {
    let access_token = await token();
    for(let i in skus){
    setTimeout(async () => {
        try{
         const result = await axios.get(`https://api.mercadolibre.com/users/766642543/items/search?seller_sku=${skus[i]}`,
         {headers: {'Content-Type': 'application/json',Authorization: `Bearer ${access_token}`,},})
         let items = result.data.results;
            console.log(skus[i], items)
          }catch(err){
            console.log(items[i], err);
        }
           }, 1000 * i)

}}
// getFullSku();
getFull();

// axios.get('https://api.mercadolibre.com/sites/MPE/search?seller_id=766642543', {headers: {'Content-Type': 'application/json', Authorization: 'Bearer APP_USR-2796079999742920-100613-954696f09176bff0d487ff7d76448ed4-766642543'}})
// .then(response => {
//     let results = response.data.results;
//     results.forEach(result => {
//         console.log(result.id);
//     })
// })
// .catch(console.error);